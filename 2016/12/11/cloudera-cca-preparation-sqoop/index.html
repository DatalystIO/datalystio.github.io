<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> CCA Preparation - Sqoop · DatalystIO</title><meta name="description" content="CCA Preparation - Sqoop - null"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://datalyst.io/atom.xml" title="DatalystIO"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">HOME</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">TAG</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">CCA Preparation - Sqoop</h1><div class="post-info">Dec 11, 2016</div><div class="post-content"><h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>What is Sqoop?</p>
<blockquote>
<p>Sqoop is a tool designed to transfer data between <code>Hadoop</code> and <code>relational databases</code> or <code>mainframes</code>. </p>
</blockquote>
<p>What can I do with Sqoop?</p>
<blockquote>
<p>You can use Sqoop to import data from a relational database management system (RDBMS) such as MySQL or Oracle or a mainframe into the Hadoop Distributed File System (HDFS), transform the data in Hadoop MapReduce, and then export the data back into an RDBMS.</p>
</blockquote>
<p>What else can Sqoop do?</p>
<blockquote>
<p>Sqoop automates most of this process, relying on the database to describe the schema for the data to be imported. Sqoop uses MapReduce to import and export the data, which provides parallel operation as well as fault tolerance.</p>
</blockquote>
<h3 id="CCA-Related-Sqoop-knowledge"><a href="#CCA-Related-Sqoop-knowledge" class="headerlink" title="CCA Related Sqoop knowledge"></a>CCA Related Sqoop knowledge</h3><p>According to <a href="http://www.cloudera.com/training/certification/cca-spark.html" target="_blank" rel="external">CCA syllabus</a>, below are the core part that will be examed in CCA exam.</p>
<ul>
<li>Import data from a MySQL database into HDFS using Sqoop</li>
<li>Export data to a MySQL database from HDFS using Sqoop</li>
<li>Change the delimiter and file format of data during import using Sqoop</li>
</ul>
<h3 id="Sqoop-Common-Commands"><a href="#Sqoop-Common-Commands" class="headerlink" title="Sqoop Common Commands"></a>Sqoop Common Commands</h3><h4 id="list-all-database"><a href="#list-all-database" class="headerlink" title="list all database"></a>list all database</h4><p>The <code>list-databases</code> will list database schemas present on a server.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sqoop list-databases \</div><div class="line">      --connect <span class="string">"jdbc:mysql://quickstart.cloudera:3306"</span> \</div><div class="line">      --username retail_dba \</div><div class="line">      --password cloudera</div></pre></td></tr></table></figure></p>
<h4 id="list-all-tables-in-a-database"><a href="#list-all-tables-in-a-database" class="headerlink" title="list all tables in a database"></a>list all tables in a database</h4><p>The <code>list-tables</code> will list tables schemas present on a database<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sqoop list-tables \</div><div class="line">      --connect <span class="string">"jdbc:mysql://quickstart.cloudera:3306/retail_db"</span> \</div><div class="line">      --username retail_dba \</div><div class="line">      --password cloudera</div></pre></td></tr></table></figure></p>
<h4 id="eval-a-query"><a href="#eval-a-query" class="headerlink" title="eval a query"></a>eval a query</h4><p>The <code>eval</code> tool allows user to quickly run a simple SQL query against a database.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">sqoop <span class="built_in">eval</span>  \</div><div class="line">      --connect <span class="string">"jdbc:mysql://quickstart.cloudera:3306/retail_db"</span> \</div><div class="line">      --username retail_dba \</div><div class="line">      --password cloudera \</div><div class="line">      --query <span class="string">"select * from departments"</span></div></pre></td></tr></table></figure></p>
<h4 id="import-all-tables"><a href="#import-all-tables" class="headerlink" title="import all tables"></a>import all tables</h4><p>The <code>import-all-tables</code> tool imports a set of tables from an RDBMS to HDFS. Data from each table is stored in a separate directory in HDFS.</p>
<p>For example,</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">sqoop import-all-tables \</div><div class="line">      -m 12 \</div><div class="line">      --connect <span class="string">"jdbc:mysql://quickstart.cloudera:3306/retail_db"</span> \</div><div class="line">      --username retail_dba \</div><div class="line">      --password cloudera \</div><div class="line">      --warehouse-dir=/user/hive/warehouse/retail_stage.db</div></pre></td></tr></table></figure>
<p>the following code will just <strong>import all tables in retail_db to HDFS with 12 map reduce tasks, while not showing in Hive</strong> .</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://archive-primary.cloudera.com/cdh5/cdh/5/sqoop-1.4.5-cdh5.3.2/SqoopUserGuide.html" target="_blank" rel="external">Sqoop User Guide</a></li>
<li><a href="https://github.com/DatalystIO/code/cca175/sqoop_example.sh" target="_blank" rel="external">Sample Code for Practise Sqoop</a></li>
</ul>
</div></article></div></section><footer><div class="paginator"><a href="/2016/11/14/docker-series-introduction/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://datalyst.io"></a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>